<!--
Rapaz a mudança foi grande
Tenho de estudar um pouco mais para entender o que aconteceu aqui.
-->

<!--
<p id="notice"><%= notice %></p>

<p>
  <strong>Title:</strong>
  <%= @link.title %>
</p>

<p>
  <strong>Url:</strong>
  <%= @link.url %>
</p>

<%= link_to 'Edit', edit_link_path(@link) %> |
<%= link_to 'Back', links_path %>
-->

<div class="page-header">
  <h1>
    <a href="<%= @link.url %>"><%= @link.title %></a>
    <br>
    <small><%= "Enviado por " + @link.user.email if defined? "Enviado por " + @link.user.email %></small>
  </h1>
</div>

<div class="btn-group">
  <%= link_to 'Visitar URL', @link.url, class: "btn btn-primary", target: "_blank" %>
</div>

<% if @link.user == current_user %>
    <div class="btn-group">
      <%= link_to 'Editar', edit_link_path(@link), class: "btn btn-default"  %>
      <%= link_to 'Apagar', @link,                 class: "btn btn-default", method: :delete, data: { confirm: "tem certeza?" } %>
    </div>
<% end %>


<div class="btn-group pull-right">
  <%= link_to like_link_path(@link), method: :put, class: "btn btn-default btn-sm" do %>
      <span class="glyphicon glyphicon-chevron-up"></span>
      upvote
      <%= @link.get_upvotes.size %>
  <% end %>
  <%= link_to dislike_link_path(@link), method: :put, class: "btn btn-default btn-sm" do %>
      <span class="glyphicon glyphicon-chevron-down"></span>
      downvote
      <%= @link.get_downvotes.size %>
  <% end %>
</div>

<h3 class="comments_title">
  <%= @link.comments.count %> comments
</h3>

<div id="comments">
  <%= render :partial => @link.comments %>
</div>

<%= simple_form_for [@link, Comment.new] do |f| %>
  <div class="lead">
    <%= f.text_area :body, class: "form-control" %>
  </div>
  <br>
  <%= f.submit "ADD Comentário", class: "btn btn-primary" %>
<% end %>